<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>for louise. ❤️</title>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;600&family=Playfair+Display:ital,wght@0,400;0,600;1,400&family=Dancing+Script:wght@400;700&display=swap" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Confetti -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Quicksand', sans-serif;
            height: 100vh;
            overflow: hidden;
            position: relative;
        }

        /* ===== INTRO SCREEN ===== */
        #intro-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000000;
            z-index: 10000;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: opacity 1.5s ease;
            cursor: default;
        }

        #intro-screen.fade-out {
            opacity: 0;
            pointer-events: none;
        }

        #intro-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: block;
        }

        .intro-text {
            position: relative;
            z-index: 10001;
            color: rgba(255, 105, 180, 0.8);
            font-family: 'Dancing Script', cursive;
            font-size: 2rem;
            text-align: center;
            pointer-events: none;
            text-shadow: 0 0 20px #ff69b4;
            animation: textPulse 2s infinite;
            opacity: 0.7;
        }

        @keyframes textPulse {
            0%, 100% { opacity: 0.5; transform: scale(1); }
            50% { opacity: 0.8; transform: scale(1.05); }
        }

        .intro-text small {
            display: block;
            font-size: 1rem;
            font-family: 'Quicksand', sans-serif;
            color: rgba(255, 182, 193, 0.5);
            margin-top: 10px;
        }

        /* ===== MAIN DASHBOARD ===== */
        #main-dashboard {
            display: none;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        .dark-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 30% 40%, #1a0c12 0%, #0a0507 50%, #000000 100%);
            z-index: -3;
        }

        .bubbles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            overflow: hidden;
        }

        .bubble {
            position: absolute;
            background: rgba(255, 105, 180, 0.05);
            border-radius: 50%;
            animation: float 20s infinite ease-in-out;
            box-shadow: 0 0 30px rgba(255, 105, 180, 0.1);
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) translateX(0) rotate(0deg); }
            33% { transform: translateY(-30px) translateX(20px) rotate(120deg); }
            66% { transform: translateY(20px) translateX(-20px) rotate(240deg); }
        }

        .b1 { width: 300px; height: 300px; top: 10%; left: 5%; animation-duration: 25s; }
        .b2 { width: 400px; height: 400px; bottom: 10%; right: 5%; animation-duration: 30s; }
        .b3 { width: 200px; height: 200px; top: 30%; right: 20%; animation-duration: 20s; }
        .b4 { width: 350px; height: 350px; bottom: 20%; left: 15%; animation-duration: 28s; }
        .b5 { width: 150px; height: 150px; top: 70%; right: 30%; animation-duration: 18s; }

        .floating-hearts {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none;
        }

        .floating-heart {
            position: absolute;
            color: rgba(255, 105, 180, 0.1);
            font-size: 24px;
            animation: floatHeart 15s infinite linear;
            filter: drop-shadow(0 0 5px #ff69b4);
        }

        @keyframes floatHeart {
            0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
            10% { opacity: 0.3; }
            90% { opacity: 0.3; }
            100% { transform: translateY(-100px) rotate(360deg); opacity: 0; }
        }

        .pattern {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle at 30% 40%, rgba(255, 105, 180, 0.05) 1px, transparent 1px),
                radial-gradient(circle at 70% 60%, rgba(255, 182, 193, 0.05) 1px, transparent 1px);
            background-size: 50px 50px, 80px 80px;
            z-index: -1;
            opacity: 0.5;
        }

        /* MAIN CONTAINER - NO SCROLL */
        .main-container {
            display: flex;
            height: 100vh;
            width: 100vw;
            position: relative;
            z-index: 2;
            overflow: hidden;
        }

        /* ===== LEFT SIDE - FIXED HEIGHT, NO SCROLL ===== */
        .left-side {
            width: 340px;
            background: rgba(20, 10, 15, 0.7);
            backdrop-filter: blur(15px);
            border-right: 1px solid rgba(255, 105, 180, 0.2);
            padding: 30px 20px;
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
        }

        .left-side h2 {
            font-family: 'Dancing Script', cursive;
            font-size: 2.2rem;
            color: #ffb6c1;
            text-align: center;
            margin-bottom: 20px;
            text-shadow: 0 0 10px #ff69b4;
            flex-shrink: 0;
        }

        .left-side h2 i {
            color: #ff69b4;
            margin: 0 8px;
            font-size: 1.8rem;
            animation: sparkle 2s infinite;
        }

        @keyframes sparkle {
            0%, 100% { opacity: 0.7; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.2); }
        }

        /* GRID - FITS EXACTLY 8 CARDS */
        .open-when-left-grid {
            display: flex;
            flex-direction: column;
            gap: 10px;
            height: calc(100vh - 100px);
            overflow: visible;
            justify-content: flex-start;
        }

        .open-when-left-card {
            background: rgba(30, 15, 20, 0.7);
            backdrop-filter: blur(10px);
            border-radius: 16px 16px 16px 6px;
            padding: 14px 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 105, 180, 0.2);
            box-shadow: 0 4px 15px rgba(255, 105, 180, 0.1);
            display: flex;
            align-items: center;
            gap: 14px;
            position: relative;
            flex-shrink: 0;
            height: 75px;
        }

        /* Make cards slightly smaller to fit 8 */
        .open-when-left-card:nth-child(n+8) {
            margin-top: auto;
        }

        .open-when-left-card::before {
            content: '';
            position: absolute;
            top: -4px;
            left: 18px;
            width: 25px;
            height: 8px;
            background: rgba(255, 105, 180, 0.2);
            border-radius: 8px 8px 0 0;
            border: 1px solid rgba(255, 105, 180, 0.3);
            border-bottom: none;
        }

        .open-when-left-card::after {
            content: '❤️';
            position: absolute;
            top: -6px;
            right: 25px;
            font-size: 12px;
            background: #ff69b4;
            width: 22px;
            height: 22px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            border: 2px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 0 12px #ff69b4;
        }

        .open-when-left-card:hover {
            transform: translateX(5px) translateY(-1px);
            background: rgba(40, 20, 25, 0.8);
            border-color: #ff69b4;
            box-shadow: 0 8px 20px rgba(255, 105, 180, 0.2);
        }

        .open-when-left-card i {
            font-size: 1.6rem;
            color: #ffb6c1;
            width: 36px;
            text-align: center;
            filter: drop-shadow(0 0 5px #ff69b4);
        }

        .open-when-left-card:hover i {
            transform: scale(1.1);
            color: #ff69b4;
        }

        .open-when-left-card .letter-info h3 {
            font-family: 'Playfair Display', serif;
            font-size: 1.1rem;
            color: #ffb6c1;
            margin-bottom: 3px;
        }

        .open-when-left-card .letter-info p {
            font-size: 0.75rem;
            color: #d88ca0;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        /* ===== RIGHT SIDE ===== */
        .right-side {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            position: relative;
            overflow: hidden;
        }

        .right-side::before {
            content: '';
            position: absolute;
            top: 40px;
            left: 0;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, transparent, #ff69b4, #ffb6c1, #ff69b4, transparent);
            box-shadow: 0 0 8px #ff69b4;
        }

        .polaroid-container {
            display: flex;
            gap: 50px;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            position: relative;
            z-index: 2;
        }

        .polaroid {
            width: 340px;
            background: rgba(25, 15, 20, 0.7);
            backdrop-filter: blur(10px);
            padding: 18px 18px 30px 18px;
            border-radius: 20px;
            box-shadow: 0 25px 40px -15px rgba(0, 0, 0, 0.8),
                        0 0 0 1px rgba(255, 105, 180, 0.2) inset,
                        0 0 20px rgba(255, 105, 180, 0.1);
            transition: all 0.4s ease;
            cursor: pointer;
            transform: rotate(var(--rotate, -2deg));
        }

        .polaroid.left { --rotate: -2deg; }
        .polaroid.right { --rotate: 2deg; }

        .polaroid::before {
            content: '';
            position: absolute;
            top: -12px;
            left: 50%;
            transform: translateX(-50%);
            width: 35px;
            height: 18px;
            background: rgba(255, 105, 180, 0.2);
            border-radius: 8px 8px 4px 4px;
            border: 1px solid rgba(255, 105, 180, 0.3);
            box-shadow: 0 2px 8px rgba(255, 105, 180, 0.2);
        }

        .polaroid:hover {
            transform: rotate(0deg) translateY(-15px) scale(1.02);
            box-shadow: 0 35px 50px -15px rgba(0, 0, 0, 0.9),
                        0 0 0 1px rgba(255, 105, 180, 0.4) inset,
                        0 0 30px #ff69b4;
            background: rgba(35, 20, 25, 0.8);
        }

        .photo-container {
            width: 100%;
            aspect-ratio: 1/1;
            border-radius: 16px;
            overflow: hidden;
            background: #1a0f12;
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.5);
        }

        .photo {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
            filter: brightness(0.9) contrast(1.1);
        }

        .polaroid:hover .photo {
            transform: scale(1.06);
            filter: brightness(1) contrast(1.1);
        }

        .hover-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255, 105, 180, 0.2);
            backdrop-filter: blur(8px);
            color: #ffb6c1;
            padding: 12px 28px;
            border-radius: 50px;
            font-family: 'Dancing Script', cursive;
            font-size: 1.6rem;
            opacity: 0;
            transition: all 0.3s ease;
            box-shadow: 0 0 25px #ff69b4;
            border: 1px solid rgba(255, 105, 180, 0.4);
            pointer-events: none;
            white-space: nowrap;
            text-shadow: 0 0 8px #ff69b4;
        }

        .polaroid:hover .hover-text {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1.05);
            box-shadow: 0 0 35px #ff69b4;
        }

        .caption {
            text-align: center;
            margin-top: 18px;
            font-family: 'Playfair Display', serif;
            font-size: 1.4rem;
            color: #ffb6c1;
            border-top: 1px solid rgba(255, 105, 180, 0.3);
            padding-top: 15px;
            text-shadow: 0 0 6px #ff69b4;
        }

        .caption i {
            color: #ff69b4;
            margin: 0 6px;
            font-size: 1.2rem;
            animation: sparkle 3s infinite;
        }

        .valentine-btn {
            position: fixed;
            bottom: 25px;
            right: 25px;
            background: rgba(255, 105, 180, 0.2);
            backdrop-filter: blur(10px);
            color: #ffb6c1;
            border: none;
            padding: 14px 32px;
            border-radius: 50px;
            font-family: 'Dancing Script', cursive;
            font-size: 1.4rem;
            cursor: pointer;
            box-shadow: 0 0 25px rgba(255, 105, 180, 0.3);
            border: 1px solid rgba(255, 105, 180, 0.3);
            display: flex;
            align-items: center;
            gap: 10px;
            animation: buttonPulse 3s infinite;
            z-index: 100;
        }

        @keyframes buttonPulse {
            0%, 100% { transform: scale(1); box-shadow: 0 0 25px rgba(255, 105, 180, 0.3); }
            50% { transform: scale(1.05); box-shadow: 0 0 40px #ff69b4; }
        }

        .valentine-btn:hover {
            background: rgba(255, 105, 180, 0.3);
            color: white;
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 0 50px #ff69b4;
        }

        /* MODALS (same as before but adjusted) */
        .modal, .valentine-modal, .lightbox, .open-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(12px);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .modal-content, .valentine-content, .lightbox-content, .open-modal-content {
            background: rgba(20, 10, 15, 0.8);
            backdrop-filter: blur(20px);
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            padding: 35px;
            border-radius: 40px;
            border: 1px solid rgba(255, 105, 180, 0.3);
            box-shadow: 0 0 40px rgba(255, 105, 180, 0.2);
        }

        .close-modal {
            position: absolute;
            top: 15px;
            right: 20px;
            width: 40px;
            height: 40px;
            font-size: 2rem;
            cursor: pointer;
            color: #ffb6c1;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            background: rgba(255, 105, 180, 0.1);
            border: 1px solid rgba(255, 105, 180, 0.3);
        }

        .close-modal:hover {
            color: #ff69b4;
            transform: rotate(90deg);
            box-shadow: 0 0 15px #ff69b4;
        }

        .modal-title {
            font-family: 'Dancing Script', cursive;
            font-size: 2.4rem;
            color: #ffb6c1;
            margin-bottom: 20px;
            text-align: center;
            border-bottom: 1px dashed #ff69b4;
            padding-bottom: 15px;
            text-shadow: 0 0 8px #ff69b4;
        }

        .typewriter-text {
            font-size: 1rem;
            line-height: 1.7;
            color: #ffb6c1;
            white-space: pre-wrap;
            padding: 15px;
            background: rgba(255, 105, 180, 0.05);
            border-radius: 25px;
            border: 1px solid rgba(255, 105, 180, 0.2);
        }

        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }

        .gallery-item {
            background: rgba(255, 105, 180, 0.1);
            border-radius: 18px;
            overflow: hidden;
            cursor: pointer;
            border: 1px solid rgba(255, 105, 180, 0.3);
            aspect-ratio: 1/1;
        }

        .gallery-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s;
        }

        .gallery-item:hover {
            transform: scale(1.02);
            border-color: #ff69b4;
            box-shadow: 0 0 20px #ff69b4;
        }

        .valentine-content {
            max-width: 400px;
            text-align: center;
        }

        .valentine-question {
            font-family: 'Dancing Script', cursive;
            font-size: 2.5rem;
            color: #ffb6c1;
            margin-bottom: 25px;
            text-shadow: 0 0 12px #ff69b4;
        }

        .button-container {
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        .yes-btn, .no-btn {
            padding: 12px 28px;
            border-radius: 50px;
            font-family: 'Quicksand', sans-serif;
            font-size: 1.3rem;
            cursor: pointer;
            border: 1px solid rgba(255, 105, 180, 0.3);
            background: rgba(255, 105, 180, 0.1);
            color: #ffb6c1;
            flex: 1;
        }

        .yes-btn {
            background: rgba(255, 105, 180, 0.2);
        }

        .yes-btn:hover {
            background: #ff69b4;
            transform: translateY(-2px);
            box-shadow: 0 0 30px #ff69b4;
        }

        .lightbox-content {
            max-width: 600px;
            padding: 0;
            overflow: hidden;
        }

        .lightbox-story {
            padding: 25px;
        }

        .lightbox-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.8rem;
            color: #ffb6c1;
            margin-bottom: 10px;
            border-left: 3px solid #ff69b4;
            padding-left: 15px;
        }

        .open-modal-content {
            max-width: 450px;
            padding: 35px;
        }

        .open-modal-header {
            font-family: 'Dancing Script', cursive;
            font-size: 2.2rem;
            color: #ffb6c1;
            text-align: center;
            margin-bottom: 20px;
            border-bottom: 1px dashed #ff69b4;
            padding-bottom: 15px;
        }

        .open-modal-body {
            font-size: 1.1rem;
            line-height: 1.7;
            color: #d88ca0;
            white-space: pre-wrap;
            padding: 20px;
            background: rgba(255, 105, 180, 0.05);
            border-radius: 30px;
            border: 1px solid rgba(255, 105, 180, 0.2);
        }

        .open-close-btn {
            background: rgba(255, 105, 180, 0.2);
            color: white;
            border: 1px solid rgba(255, 105, 180, 0.3);
            padding: 12px 30px;
            border-radius: 50px;
            font-family: 'Quicksand', sans-serif;
            font-size: 1rem;
            cursor: pointer;
            margin-top: 20px;
            width: 100%;
        }

        .open-close-btn:hover {
            background: #ff69b4;
            box-shadow: 0 0 30px #ff69b4;
        }

        .close-lightbox {
            position: absolute;
            top: 25px;
            right: 30px;
            color: white;
            font-size: 2.5rem;
            cursor: pointer;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255, 105, 180, 0.2);
            border-radius: 50%;
            backdrop-filter: blur(5px);
        }

        .close-lightbox:hover {
            transform: rotate(90deg);
            box-shadow: 0 0 20px #ff69b4;
        }

        .loading {
            text-align: center;
            padding: 30px;
            color: #ffb6c1;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        @media (max-width: 1000px) {
            .polaroid { width: 280px; }
            .left-side { width: 300px; }
        }

        @media (max-width: 768px) {
            .main-container { flex-direction: column; }
            .left-side { width: 100%; height: auto; border-right: none; border-bottom: 1px solid rgba(255,105,180,0.2); }
            .open-when-left-grid { height: auto; }
            .polaroid { width: 240px; }
            .polaroid-container { gap: 20px; }
        }
    </style>
</head>
<body>
    <!-- INTRO SCREEN -->
    <div id="intro-screen">
        <canvas id="intro-canvas"></canvas>
        <div class="intro-text">
            ❤️ for you, louise ❤️
            <small>hold anywhere to gather the sparkles</small>
        </div>
    </div>

    <!-- MAIN DASHBOARD -->
    <div id="main-dashboard">
        <div class="dark-bg"></div>
        <div class="bubbles">
            <div class="bubble b1"></div>
            <div class="bubble b2"></div>
            <div class="bubble b3"></div>
            <div class="bubble b4"></div>
            <div class="bubble b5"></div>
        </div>
        <div class="floating-hearts" id="floatingHearts"></div>
        <div class="pattern"></div>

        <div class="main-container">
            <!-- LEFT SIDE - OPEN WHEN LETTERS (8 CARDS, NO SCROLL) -->
            <div class="left-side">
                <h2><i class="fas fa-envelope-open-text"></i> open when... <i class="fas fa-envelope-open-text"></i></h2>
                <div class="open-when-left-grid" id="openWhenLeftGrid"></div>
            </div>

            <!-- RIGHT SIDE - POLAROIDS -->
            <div class="right-side">
                <div class="polaroid-container">
                    <div class="polaroid left" id="leftPolaroid">
                        <div class="photo-container">
                            <img src="louise.jpg" alt="Louise" class="photo">
                            <div class="hover-text">for louise</div>
                        </div>
                        <div class="caption"><i class="fas fa-star"></i> my louise <i class="fas fa-star"></i></div>
                    </div>
                    <div class="polaroid right" id="rightPolaroid">
                        <div class="photo-container">
                            <img src="us-main.jpg" alt="Us" class="photo">
                            <div class="hover-text">our story</div>
                        </div>
                        <div class="caption"><i class="fas fa-heart"></i> you & me <i class="fas fa-heart"></i></div>
                    </div>
                </div>
            </div>
        </div>

        <button class="valentine-btn" id="valentineBtn">
            <i class="far fa-heart"></i> be my valentine?
        </button>
    </div>

    <!-- MODALS -->
    <div class="modal" id="messageModal">
        <div class="modal-content">
            <span class="close-modal" id="closeMessageModal">&times;</span>
            <div class="modal-title">for my love, louise</div>
            <div class="typewriter-text" id="typewriterMessage"></div>
        </div>
    </div>

    <div class="modal" id="galleryModal">
        <div class="modal-content">
            <span class="close-modal" id="closeGalleryModal">&times;</span>
            <div class="modal-title">our precious memories</div>
            <div id="galleryGrid" class="gallery-grid"></div>
        </div>
    </div>

    <div class="valentine-modal" id="valentineModal">
        <div class="valentine-content">
            <h2 class="valentine-question">will you be my valentine?</h2>
            <div class="button-container">
                <button class="yes-btn" id="yesBtn">yes</button>
                <button class="no-btn" id="noBtn">no</button>
            </div>
            <div id="valentineResponse" style="display: none; margin-top: 20px; font-size: 1.2rem; color: #ffb6c1;">
                <i class="fas fa-heart"></i> chat me "heart" <i class="fas fa-heart"></i>
            </div>
        </div>
    </div>

    <div class="lightbox" id="lightbox">
        <span class="close-lightbox" id="closeLightbox">&times;</span>
        <div class="lightbox-content">
            <div class="lightbox-image-container">
                <img src="" alt="Memory" id="lightboxImg">
            </div>
            <div class="lightbox-story">
                <div class="lightbox-title" id="lightboxTitle"></div>
                <div class="lightbox-description" id="lightboxDescription"></div>
            </div>
        </div>
    </div>

    <div class="open-modal" id="openModal">
        <div class="open-modal-content">
            <div class="open-modal-header" id="openModalHeader"></div>
            <div class="open-modal-body" id="openModalBody"></div>
            <button class="open-close-btn" id="closeOpenBtn">close letter</button>
        </div>
    </div>

    <script>
        // ===== INTRO SPARKLE INTERACTION =====
        const introScreen = document.getElementById('intro-screen');
        const mainDashboard = document.getElementById('main-dashboard');
        const canvas = document.getElementById('intro-canvas');
        const ctx = canvas.getContext('2d');
        
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        
        // 500 SPARKLES - MAS MARAMI!
        let particles = [];
        const particleCount = 500;
        let mouseX = canvas.width / 2;
        let mouseY = canvas.height / 2;
        let isHolding = false;
        let holdProgress = 0;
        let heartFormed = false;
        
        // Create particles
        for (let i = 0; i < particleCount; i++) {
            particles.push({
                x: Math.random() * canvas.width,
                y: Math.random() * canvas.height,
                vx: (Math.random() - 0.5) * 1.5,
                vy: (Math.random() - 0.5) * 1.5,
                size: Math.random() * 4 + 1,
                color: `rgba(255, ${Math.floor(100 + Math.random() * 80)}, 180, ${0.2 + Math.random() * 0.6})`,
                originalX: Math.random() * canvas.width,
                originalY: Math.random() * canvas.height
            });
        }
        
        // Mouse events - HOLD LANG (walang click)
        canvas.addEventListener('mousemove', (e) => {
            const rect = canvas.getBoundingClientRect();
            mouseX = e.clientX - rect.left;
            mouseY = e.clientY - rect.top;
        });
        
        canvas.addEventListener('mousedown', () => {
            isHolding = true;
            holdProgress = 0;
        });
        
        canvas.addEventListener('mouseup', () => {
            if (isHolding && !heartFormed) {
                isHolding = false;
                formHeartShape();
            }
        });
        
        canvas.addEventListener('mouseleave', () => {
            isHolding = false;
        });
        
        // Touch events for mobile
        canvas.addEventListener('touchmove', (e) => {
            e.preventDefault();
            const rect = canvas.getBoundingClientRect();
            mouseX = e.touches[0].clientX - rect.left;
            mouseY = e.touches[0].clientY - rect.top;
        });
        
        canvas.addEventListener('touchstart', (e) => {
            e.preventDefault();
            isHolding = true;
            holdProgress = 0;
        });
        
        canvas.addEventListener('touchend', (e) => {
            e.preventDefault();
            if (isHolding && !heartFormed) {
                isHolding = false;
                formHeartShape();
            }
        });
        
        // Form heart shape
        function formHeartShape() {
            heartFormed = true;
            
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const scale = Math.min(canvas.width, canvas.height) / 7;
            
            for (let i = 0; i < particles.length; i++) {
                const t = (i / particles.length) * Math.PI * 2;
                const x = 16 * Math.pow(Math.sin(t), 3);
                const y = 13 * Math.cos(t) - 5 * Math.cos(2*t) - 2 * Math.cos(3*t) - Math.cos(4*t);
                
                particles[i].targetX = centerX + x * scale;
                particles[i].targetY = centerY - y * scale;
                particles[i].speed = 0.03 + Math.random() * 0.03;
            }
            
            setTimeout(() => {
                introScreen.classList.add('fade-out');
                mainDashboard.style.display = 'block';
                
                createFloatingHearts();
                
                confetti({
                    particleCount: 200,
                    spread: 120,
                    origin: { y: 0.6 },
                    colors: ['#ff69b4', '#ffb6c1', '#ff9a9e']
                });
            }, 2000);
        }
        
        // Animation loop
        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            for (let i = 0; i < particles.length; i++) {
                const p = particles[i];
                
                if (heartFormed && p.targetX) {
                    p.x += (p.targetX - p.x) * p.speed;
                    p.y += (p.targetY - p.y) * p.speed;
                } else {
                    if (isHolding) {
                        p.x += (mouseX - p.x) * 0.03;
                        p.y += (mouseY - p.y) * 0.03;
                        holdProgress = Math.min(holdProgress + 0.005, 1);
                    } else {
                        p.x += p.vx;
                        p.y += p.vy;
                        
                        if (p.x < 0 || p.x > canvas.width) p.vx *= -1;
                        if (p.y < 0 || p.y > canvas.height) p.vy *= -1;
                        
                        p.x += (p.originalX - p.x) * 0.005;
                        p.y += (p.originalY - p.y) * 0.005;
                    }
                }
                
                ctx.beginPath();
                ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                ctx.fillStyle = p.color;
                ctx.shadowColor = '#ff69b4';
                ctx.shadowBlur = 12;
                ctx.fill();
            }
            
            if (isHolding && !heartFormed) {
                ctx.beginPath();
                ctx.arc(mouseX, mouseY, 25 + holdProgress * 15, 0, Math.PI * 2);
                ctx.strokeStyle = '#ff69b4';
                ctx.lineWidth = 2;
                ctx.shadowBlur = 20;
                ctx.stroke();
                
                ctx.font = '12px Quicksand';
                ctx.fillStyle = '#ffb6c1';
                ctx.shadowBlur = 10;
                ctx.fillText('hold to gather', mouseX - 40, mouseY - 35);
            }
            
            requestAnimationFrame(animate);
        }
        
        animate();
        
        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });

        // ===== MAIN DASHBOARD FUNCTIONS =====
        function createFloatingHearts() {
            const container = document.getElementById('floatingHearts');
            for (let i = 0; i < 30; i++) {
                const heart = document.createElement('div');
                heart.className = 'floating-heart';
                heart.innerHTML = '❤️';
                heart.style.left = Math.random() * 100 + '%';
                heart.style.animationDelay = Math.random() * 15 + 's';
                heart.style.fontSize = (Math.random() * 30 + 15) + 'px';
                container.appendChild(heart);
            }
        }

        // 3D PARALLAX
        document.addEventListener('mousemove', (e) => {
            if (mainDashboard.style.display !== 'block') return;
            
            const x = (e.clientX / window.innerWidth - 0.5) * 15;
            const y = (e.clientY / window.innerHeight - 0.5) * 15;
            
            const polaroids = document.querySelectorAll('.polaroid');
            const cards = document.querySelectorAll('.open-when-left-card');
            
            polaroids.forEach(polaroid => {
                polaroid.style.transform = `rotate(${polaroid.classList.contains('left') ? -2 : 2}deg) translateX(${x * 0.3}px) translateY(${y * 0.3}px)`;
            });
            
            cards.forEach(card => {
                card.style.transform = `translateX(${x * 0.2}px) translateY(${y * 0.2}px)`;
            });
        });

        // Hearts cursor
        document.addEventListener('mousemove', (e) => {
            if (mainDashboard.style.display !== 'block') return;
            if (Math.random() < 0.1) {
                const heart = document.createElement('div');
                heart.innerHTML = '❤️';
                heart.style.position = 'fixed';
                heart.style.left = (e.pageX - 8) + 'px';
                heart.style.top = (e.pageY - 8) + 'px';
                heart.style.fontSize = (Math.random() * 20 + 12) + 'px';
                heart.style.pointerEvents = 'none';
                heart.style.zIndex = '9999';
                heart.style.opacity = '0.4';
                heart.style.color = '#ff69b4';
                heart.style.filter = 'drop-shadow(0 0 3px #ff69b4)';
                heart.style.animation = 'float 1.5s ease-out forwards';
                document.body.appendChild(heart);
                setTimeout(() => heart.remove(), 1500);
            }
        });

        // Original messages
        const messageForLouise = `My Dearest kairi(lowisie, loys, Louise),

Mahal na mahal kita palagi kahit mayat maya tayo nag away hahahah tangina i miss you. Ever since the day we met, I am constantly inlove with you. YES, INLOVE hindi yung pabawas or what. SOBRA KITANG MAHAL KAHIT NA ANONG MANGYARE.
I always say sa sarili ko "how to be better for you without having any changes sa mga behaviors na gusto mo. I'm sorry if sometimes we go through hell before coming back into what is us talaga. Pero love really is like that diba po?
Pasensya kana sa mga araw na hindi tayo ayos lalo na sa mga kasalanan ko. I hope magkaayos tayo after this. hehe

This is the only thing I could give to you as of now. I dont have any money or materials to give to you. I only have knowledge and this para lang ma express ko yung pag mamahal ko sayo. I miss you, love. Balik kana sa akin.

Mahal na mahal kita, palagi.

ikaw at ikaw lang ang lagi,
Dalevx ❤️`;

        const openWhenLetters = [
            { icon: 'fa-face-frown', title: "you're sad", message: "Remember when we are planning our future together and spend time for each other." },
            { icon: 'fa-face-smile', title: "you're happy", message: "Always remember why we are happy, because of each other." },
            { icon: 'fa-face-angry', title: "you're angry", message: "deep breathe and drink water. Stay calm I am always here." },
            { icon: 'fa-face-tired', title: "you're tired", message: "Think of panpan as me. Cuddle and hug tightly so that you can think of me." },
            { icon: 'fa-face-kiss', title: "you miss me", message: "take a look at the pictures and the time we always bond. ALSO REMEMBER THE FIRST DATE!" },
            { icon: 'fa-star', title: "you need reminded", message: "I love you always and forever. Kahit na mamatay na ako ikaw padin ang hahanap hanapin ko. I will always stay by your side." },
            { icon: 'fa-heart', title: "just because", message: "YOU ARE ALWAYS MY ONLY AND MY NUMBER ONE. WALANG MAG BABAGO!" },
            { icon: 'fa-music', title: "need a song", message: "open spotify and play 'You!'" }
        ];

        // Load Open When letters
        const leftGrid = document.getElementById('openWhenLeftGrid');
        openWhenLetters.forEach(letter => {
            const card = document.createElement('div');
            card.className = 'open-when-left-card';
            card.innerHTML = `
                <i class="fas ${letter.icon}"></i>
                <div class="letter-info">
                    <h3>${letter.title}</h3>
                    <p><i class="fas fa-arrow-right"></i> open letter</p>
                </div>
            `;
            card.addEventListener('click', () => {
                document.getElementById('openModalHeader').textContent = letter.title;
                document.getElementById('openModalBody').textContent = letter.message;
                document.getElementById('openModal').style.display = 'flex';
            });
            leftGrid.appendChild(card);
        });

        // Valentine
        const valentineBtn = document.getElementById('valentineBtn');
        const valentineModal = document.getElementById('valentineModal');
        const yesBtn = document.getElementById('yesBtn');
        const noBtn = document.getElementById('noBtn');
        const valentineResponse = document.getElementById('valentineResponse');
        let noClickCount = 0;
        
        valentineBtn.addEventListener('click', () => {
            valentineModal.style.display = 'flex';
            resetValentine();
        });
        
        function resetValentine() {
            noBtn.classList.remove('disabled');
            noBtn.classList.add('active');
            noBtn.textContent = 'no';
            noBtn.style.transform = 'translate(0, 0)';
            valentineResponse.style.display = 'none';
            yesBtn.style.display = 'block';
            noBtn.style.display = 'block';
            noClickCount = 0;
        }
        
        yesBtn.addEventListener('click', () => {
            yesBtn.style.display = 'none';
            noBtn.style.display = 'none';
            valentineResponse.style.display = 'block';
            confetti({
                particleCount: 150,
                spread: 100,
                origin: { y: 0.6 },
                colors: ['#ff69b4', '#ffb6c1']
            });
        });
        
        noBtn.addEventListener('click', function() {
            noClickCount++;
            if (noClickCount === 1) {
                noBtn.style.transform = `translate(${Math.random()*150-75}px, ${Math.random()*60-30}px)`;
                noBtn.textContent = 'sure?';
            } else if (noClickCount === 2) {
                noBtn.style.transform = `translate(${Math.random()*200-100}px, ${Math.random()*100-50}px)`;
                noBtn.textContent = 'isipin mo?';
            } else if (noClickCount === 3) {
                noBtn.classList.add('disabled');
                noBtn.textContent = '❤️';
                noBtn.style.transform = 'translate(0, 0)';
            }
        });

        // Load memories
        async function loadMemories() {
            const galleryGrid = document.getElementById('galleryGrid');
            galleryGrid.innerHTML = '<div class="loading"><i class="fas fa-heart"></i><br>loading...</div>';
            try {
                const response = await fetch(`memories.json?t=${Date.now()}`);
                const data = await response.json();
                galleryGrid.innerHTML = '';
                data.memories.forEach(memory => {
                    const item = document.createElement('div');
                    item.className = 'gallery-item';
                    item.innerHTML = `<img src="${memory.url}" alt="${memory.title}">`;
                    item.addEventListener('click', () => {
                        document.getElementById('lightboxImg').src = memory.url;
                        document.getElementById('lightboxTitle').textContent = memory.title;
                        document.getElementById('lightboxDescription').textContent = memory.story;
                        document.getElementById('lightbox').style.display = 'flex';
                    });
                    galleryGrid.appendChild(item);
                });
            } catch (error) {
                galleryGrid.innerHTML = '<div class="loading">error</div>';
            }
        }

        // Typewriter
        function typeWriter(element, text, speed = 15) {
            let i = 0;
            element.innerHTML = '';
            function typing() {
                if (i < text.length) {
                    element.innerHTML += text.charAt(i);
                    i++;
                    setTimeout(typing, speed);
                }
            }
            typing();
        }

        // Event listeners
        document.getElementById('leftPolaroid').addEventListener('click', () => {
            document.getElementById('messageModal').style.display = 'flex';
            typeWriter(document.getElementById('typewriterMessage'), messageForLouise, 15);
        });

        document.getElementById('rightPolaroid').addEventListener('click', () => {
            document.getElementById('galleryModal').style.display = 'flex';
            loadMemories();
        });

        // Close buttons
        document.getElementById('closeMessageModal').addEventListener('click', () => {
            document.getElementById('messageModal').style.display = 'none';
        });
        document.getElementById('closeGalleryModal').addEventListener('click', () => {
            document.getElementById('galleryModal').style.display = 'none';
        });
        document.getElementById('closeLightbox').addEventListener('click', () => {
            document.getElementById('lightbox').style.display = 'none';
        });
        document.getElementById('closeOpenBtn').addEventListener('click', () => {
            document.getElementById('openModal').style.display = 'none';
        });

        // Close on outside click
        window.addEventListener('click', (e) => {
            if (e.target.classList.contains('modal')) e.target.style.display = 'none';
            if (e.target.classList.contains('lightbox')) e.target.style.display = 'none';
            if (e.target.classList.contains('valentine-modal')) e.target.style.display = 'none';
            if (e.target.classList.contains('open-modal')) e.target.style.display = 'none';
        });
    </script>
</body>
</html>
